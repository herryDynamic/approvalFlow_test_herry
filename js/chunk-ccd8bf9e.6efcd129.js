(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ccd8bf9e"],{"2a48":function(e,a,t){"use strict";var l=t("f6b5"),o=t.n(l);o.a},"5d3e":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"fc-table-box"},[t("el-table",{staticClass:"fc-table",attrs:{data:e.formData,border:""},on:{"cell-click":e.focusInput}},[t("el-table-column",{attrs:{width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"row-action"},[t("span",{staticClass:"index"},[e._v(" "+e._s(a.$index+1)+" ")]),t("el-popconfirm",{attrs:{title:"确定删除该行数据吗？"},on:{onConfirm:function(t){return e.removeRow(a.$index)}}},[t("i",{staticClass:"el-icon-delete delete-btn",attrs:{slot:"reference"},slot:"reference"})])],1)]}}])}),e._l(e.tableData,(function(a,l){return t("el-table-column",{key:a.formId,attrs:{"min-width":a["min-width"],label:a.label},scopedSlots:e._u([{key:"default",fn:function(o){return[t("div",[["el-select","el-checkbox-group","el-radio-group"].includes(a.tag)?[t("el-select",{attrs:{placeholder:"请选择",multiple:"el-checkbox-group"===a.tag||e.getConfById(a.formId).multiple},on:{change:function(a){return e.onFormDataChange(o.$index,l)}},model:{value:e.formData[o.$index][l].value,callback:function(a){e.$set(e.formData[o.$index][l],"value",a)},expression:"formData[scope.$index][cindex].value"}},e._l(a.options,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)]:"el-upload"===a.tag?[t("el-upload",e._b({staticStyle:{position:"relative"},attrs:{"file-list":[]}},"el-upload",e.getConfById(a.formId),!1),[t("i",{staticClass:"el-icon-upload2"}),e._v(" 上传 ")])]:t(a.tag,e._b({tag:"component",on:{change:function(a){return e.onFormDataChange(o.$index,l)}},model:{value:e.formData[o.$index][l].value,callback:function(a){e.$set(e.formData[o.$index][l],"value",a)},expression:"formData[scope.$index][cindex].value"}},"component",e.getConfById(a.formId),!1)),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.formData[o.$index][l].valid,expression:"!formData[scope.$index][cindex].valid"}],staticClass:"error-tip"},[e._v(" 不能为空 ")])],2)]}}],null,!0)},[t("template",{slot:"header"},[a.required?t("span",{staticStyle:{color:"#f56c6c"}},[e._v("*")]):e._e(),e._v(" "+e._s(a.label)+" ")])],2)}))],2),t("div",{staticClass:"actions"},[t("el-button",{attrs:{type:"text"},on:{click:e.addRow}},[t("i",{staticClass:"el-icon-plus"}),e._v(" 添加 ")])],1),t("el-button",{on:{click:e.submit}},[e._v("ok")])],1)},o=[],r=(t("a623"),t("7db0"),t("4160"),t("caad"),t("d81d"),t("13d5"),t("a434"),t("a9e3"),t("159b"),t("53ca")),i={children:[{cmpType:"common",label:"组织机构",tag:"fc-org-select",tagIcon:"dept",defaultValue:null,tabList:["dep"],buttonType:"button",title:"组织机构",searchable:!0,maxNum:99,tagConfig:{type:"info",closable:!0,"disable-transitions":!1,hit:!1,size:"small",effect:"light"},style:{width:"100%"},span:24,labelWidth:0,disabled:!1,required:!0,regList:[],changeTag:!0,proCondition:!0,asSummary:!1,formId:15,renderKey:1589446182196,layout:"colFormItem",vModel:"field1"},{cmpType:"common",label:"单行输入框",tag:"el-input",tagIcon:"input",placeholder:"请输入单行输入框单行输入框",span:24,labelWidth:0,style:{width:"100%"},clearable:!0,prepend:"",append:"","prefix-icon":"","suffix-icon":"",maxlength:null,"show-word-limit":!1,readonly:!1,disabled:!1,required:!0,regList:[],changeTag:!0,proCondition:!1,asSummary:!1,formId:1,renderKey:1589433230703,layout:"colFormItem",vModel:"field1"},{cmpType:"common",label:"级联选择",tag:"el-cascader",tagIcon:"cascader",placeholder:"请选择级联选择",defaultValue:[],span:24,labelWidth:0,style:{width:"100%"},props:{props:{multiple:!1}},"show-all-levels":!0,disabled:!1,clearable:!0,filterable:!1,required:!0,options:[{id:1,value:"选项1",label:"选项1",children:[{id:2,value:"选项1-1",label:"选项1-1"}]}],dataType:"static",labelKey:"label",valueKey:"value",childrenKey:"children",separator:"/",regList:[],changeTag:!0,proCondition:!1,asSummary:!1,formId:6,renderKey:1589433236703,layout:"colFormItem",vModel:"field6"},{cmpType:"common",label:"单选框组",tag:"el-radio-group",tagIcon:"radio",span:24,labelWidth:0,style:{},optionType:"default",border:!1,size:"medium",disabled:!1,required:!0,options:[{label:"选项一",value:"选项一"},{label:"选项二",value:"选项二"}],regList:[],changeTag:!0,proCondition:!0,formId:7,renderKey:1589433237870,layout:"colFormItem",vModel:"field7"},{cmpType:"common",label:"时间范围",tag:"fc-time-duration",showDuration:!1,tagIcon:"time-range",defaultValue:null,span:24,labelWidth:0,style:{width:"100%"},disabled:!1,clearable:!0,required:!0,"is-range":!0,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"HH:mm:ss","value-format":"HH:mm:ss",regList:[],changeTag:!0,proCondition:!0,asSummary:!1,formId:11,renderKey:1589433243456,layout:"colFormItem",vModel:"field11"},{cmpType:"common",label:"附件",tag:"el-upload",tagIcon:"upload",action:"https://jsonplaceholder.typicode.com/posts/",defaultValue:null,labelWidth:0,disabled:!1,required:!0,accept:"",name:"file","auto-upload":!0,showTip:!1,buttonText:"点击上传附件",fileSize:2,sizeUnit:"MB","list-type":"text",multiple:!1,regList:[],changeTag:!0,proCondition:!1,asSummary:!1,formId:14,span:24,renderKey:1589433246351,layout:"colFormItem",vModel:"field14"},{cmpType:"common",label:"日期范围",tag:"fc-date-duration",showDuration:!1,tagIcon:"date-range",defaultValue:null,span:24,labelWidth:0,style:{width:"100%"},type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",disabled:!1,clearable:!0,required:!0,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",readonly:!1,regList:[],changeTag:!0,proCondition:!0,asSummary:!1,formId:13,renderKey:1589433245284,layout:"colFormItem",vModel:"field13"},{cmpType:"common",label:"日期选择",tag:"el-date-picker",tagIcon:"date",placeholder:"请选择日期选择",defaultValue:null,type:"date",span:24,labelWidth:0,style:{width:"100%"},disabled:!1,clearable:!0,required:!0,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",readonly:!1,regList:[],changeTag:!0,proCondition:!1,asSummary:!1,formId:12,renderKey:1589433244229,layout:"colFormItem",vModel:"field12"},{cmpType:"common",label:"时间选择",tag:"el-time-picker",tagIcon:"time",placeholder:"请选择时间选择",defaultValue:null,span:24,labelWidth:0,style:{width:"100%"},disabled:!1,clearable:!0,required:!0,"picker-options":{selectableRange:"00:00:00-23:59:59"},format:"HH:mm:ss","value-format":"HH:mm:ss",regList:[],changeTag:!0,proCondition:!1,asSummary:!1,formId:10,renderKey:1589433242556,layout:"colFormItem",vModel:"field10"},{cmpType:"common",label:"滑块",tag:"el-slider",tagIcon:"slider",defaultValue:0,span:24,labelWidth:0,disabled:!1,required:!0,min:0,max:100,step:1,"show-stops":!1,range:!1,regList:[],changeTag:!0,proCondition:!1,asSummary:!1,formId:9,renderKey:1589433239354,layout:"colFormItem",vModel:"field9"},{cmpType:"common",label:"多选框组",tag:"el-checkbox-group",tagIcon:"checkbox",defaultValue:[],span:24,labelWidth:0,style:{},optionType:"default",border:!1,size:"medium",disabled:!1,required:!0,options:[{label:"选项一",value:"选项一"},{label:"选项二",value:"选项二"}],regList:[],changeTag:!0,proCondition:!1,asSummary:!1,formId:8,renderKey:1589433238533,layout:"colFormItem",vModel:"field8"},{cmpType:"common",label:"金额",tag:"fc-amount",tagIcon:"amount",placeholder:"请输入金额",span:24,labelWidth:0,"step-strictly":!1,"controls-position":"right",disabled:!1,required:!0,regList:[],changeTag:!0,proCondition:!0,showChinese:!0,formId:4,renderKey:1589433233395,layout:"colFormItem",vModel:"field4"},{cmpType:"common",label:"下拉选择",tag:"el-select",tagIcon:"select",placeholder:"请选择下拉选择",span:24,labelWidth:0,clearable:!0,disabled:!1,required:!0,filterable:!1,multiple:!1,options:[{label:"选项一",value:"选项一"},{label:"选项二",value:"选项二"}],regList:[],changeTag:!0,proCondition:!0,formId:5,renderKey:1589433234458,layout:"colFormItem",vModel:"field5"},{cmpType:"common",label:"多行输入框1",tag:"el-input",tagIcon:"textarea",type:"textarea",placeholder:"请输入多行输入框1",span:24,labelWidth:0,autosize:{minRows:4,maxRows:4},style:{width:"100%"},maxlength:null,"show-word-limit":!1,readonly:!1,disabled:!1,required:!0,regList:[],changeTag:!0,proCondition:!1,asSummary:!1,formId:2,renderKey:1589433231618,layout:"colFormItem",vModel:"field2"},{cmpType:"common",label:"数字输入框",tag:"el-input-number",tagIcon:"number",placeholder:"数字输入框",span:24,labelWidth:0,"step-strictly":!1,"controls-position":"right",disabled:!1,required:!0,regList:[],changeTag:!0,proCondition:!0,formId:3,renderKey:1589433232346,layout:"colFormItem",vModel:"field3"}]},d=[{props:["vModel","defaultValue","formId","type","label","tag","clearable","maxlength","readonly","disabled","required","regList"],forceProp:{"min-width":180},tag:"el-input"},{props:["vModel","defaultValue","formId","label","tag","step-strictly","disabled","required","regList"],forceProp:{controls:!1,"min-width":180},tag:"el-input-number"},{props:["vModel","defaultValue","formId","label","tag","disabled","required","regList"],forceProp:{controls:!1,"min-width":120},tag:"fc-amount"},{props:["vModel","defaultValue","formId","label","tag","clearable","disabled","required","filterable","multiple","options","regList"],forceProp:{"min-width":140},tag:"el-select"},{props:["vModel","defaultValue","formId","label","tag","defaultValue","props","show-all-levels","disabled","clearable","filterable","required","options","dataType","separator","regList"],forceProp:{"min-width":170},tag:"el-cascader"},{props:["vModel","defaultValue","formId","label","tag","optionType","border","size","disabled","required","options","regList"],forceProp:{"min-width":140},tag:"el-radio-group"},{props:["vModel","defaultValue","formId","label","tag","defaultValue","optionType","border","size","disabled","required","options","regList"],forceProp:{"min-width":140},tag:"el-checkbox-group"},{props:["vModel","defaultValue","formId","label","tag","defaultValue","disabled","required","min","max","step","show-stops","range","regList"],forceProp:{"min-width":160},tag:"el-slider"},{props:["vModel","defaultValue","formId","label","tag","defaultValue","tabList","buttonType","title","searchable","maxNum","tagConfig","disabled","required","regList"],forceProp:{buttonType:"input","min-width":100},tag:"fc-org-select"},{props:["vModel","defaultValue","formId","label","tag","defaultValue","disabled","clearable","required","picker-options","format","value-format","regList"],forceProp:{"min-width":120},tag:"el-time-picker"},{props:["vModel","defaultValue","formId","label","tag","defaultValue","disabled","clearable","required","is-range","range-separator","format","value-format","regList"],forceProp:{"min-width":320},tag:"fc-time-duration"},{props:["vModel","defaultValue","formId","label","tag","defaultValue","type","disabled","clearable","required","format","value-format","readonly","regList"],forceProp:{"min-width":120},tag:"el-date-picker"},{props:["vModel","defaultValue","formId","label","tag","defaultValue","type","range-separator","disabled","clearable","required","format","value-format","readonly","regList"],forceProp:{"min-width":320},tag:"fc-date-duration"},{props:["vModel","defaultValue","formId","label","tag","action","defaultValue","disabled","required","accept","name","auto-upload","showTip","fileSize","sizeUnit","list-type","multiple","regList"],forceProp:{"list-type":"text","min-width":80},tag:"el-upload"}],n={props:{config:{type:Object,default:function(){return i}}},data:function(){return{formData:[],tableData:[]}},created:function(){this.tableData=this.filterProps(),this.formData=[this.getEmptyRow()]},methods:{focusInput:function(e,a,t,l){var o=t.querySelector(".cell").firstElementChild,r=o&&o.querySelector("input");r&&r.focus()},filterProps:function(){var e=this.config.children;if(!e)return[];var a=function(e){return d.find((function(a){return a.tag===e.tag}))};return e.map((function(e){var t=a(e),l=t?t.props.reduce((function(a,t){return a[t]=e[t],a}),{}):e;return t.forceProp?Object.assign({},l,t.forceProp):l}))},onFormDataChange:function(e,a){var t=this.formData[e][a];t.required&&(t.valid=this.checkData(t))},checkData:function(e){var a=e.tag,t=e.value;return![null,void 0,""].includes(t)&&("fc-org-select"===a?this.checkOrgData(t):!Array.isArray(t)||t.length>0)},checkOrgData:function(e){var a=Array.isArray;if("object"!==Object(r["a"])(e)||a(e))return!1;var t=0;for(var l in e)t+=a(e[l])?e[l].length:0;return t>0},validateData:function(){var e=this;this.formData.forEach((function(a){a.forEach((function(a){return a.required&&(a.valid=e.checkData(a))}))}))},getConfById:function(e){return this.tableData.find((function(a){return a.formId===e}))},getEmptyRow:function(){return this.tableData.map((function(e){return{tag:e.tag,formId:e.formId,value:e.defaultValue,options:e.options,valid:!0,required:e.required}}))},submit:function(){this.validateData(),console.log(this.formData)},removeRow:function(e){this.formData.splice(e,1)},addRow:function(){this.formData.push(this.getEmptyRow())},getSummaries:function(e){var a=e.columns,t=e.data,l=[];return a.forEach((function(e,a){if(0!==a){var o=t.map((function(a){return Number(a[e.property])}));o.every((function(e){return isNaN(e)}))?l[a]="N/A":(l[a]=o.reduce((function(e,a){var t=Number(a);return isNaN(t)?e:e+a}),0),l[a]+=" 元")}else l[a]="总价"})),l}}},s=n,u=(t("2a48"),t("2877")),c=Object(u["a"])(s,l,o,!1,null,"643bb19f",null);a["default"]=c.exports},a623:function(e,a,t){"use strict";var l=t("23e7"),o=t("b727").every,r=t("a640"),i=t("ae40"),d=r("every"),n=i("every");l({target:"Array",proto:!0,forced:!d||!n},{every:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},f6b5:function(e,a,t){}}]);
//# sourceMappingURL=chunk-ccd8bf9e.6efcd129.js.map